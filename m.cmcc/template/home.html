<div class="hm_home dock" ref="home" sn-tap="this.exitMenu()">
    <header class="flex">
        <a href="javascript:;" sn-tap="this.menu()"><img sn-src="{sl.resource(user.avatars)}" class="cir ml_m" /></a>
        <div class="ml_m flexitem flex hm_quan__search" data-forward="{quanTab.index==0?'/pubquan/search':'/quan/search'}">
            <div class="icon-search sqr_s"></div>
            <p class="fs_m pt_1 dp_b cl_ccc">搜索{quanTab.index==0?'公众圈':quanTab.index==1?'朋友圈':'通讯录'}</p>
        </div>
        <div class="icon-bill h_bar pl_m" sn-if="quanTab.index==0" data-forward="/pubquan/myarticles"></div>
        <div class="icon-scan h_bar pl_m pr_m" sn-if="quanTab.index==0||quanTab.index==2" sn-tap="this.scan()"></div>
        <div class="icon-camera h_bar pl_m pr_m" sn-if="quanTab.index==1" sn-tap="this.showQuanMenu()"></div>
    </header>
    <div class="hm_quan__main" ref="tab" sn-require="widget/tab" sn-data="{{items:['公众圈','朋友圈','通讯录']}}">
        <div class="hm_pubquan">
            <div class="bd_tb mb_l bg_fff" sn-if="false">
                <div class="bd_b lh_s ml_l">推荐圈子</div>
                <div class="hm_pubquan__recommend">
                    <div ref="recommend" class="con">
                        <ul class="list" style="width:{recommendPublicQuan.length*95+15}px">
                            <li sn-repeat="item in recommendPublicQuan" data-forward="/pubquan/{item.quan_id}">
                                <img sn-src="{sl.resource(item.quan_pic)}" />
                                <p class="name">{item.quan_name}</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bd_t mb_l bg_fff">
                <div class="bd_b lh_s ml_l">我推荐的</div>
                <div class="hm_pubquan__myrecommend bd_b" sn-repeat="item in myrecommendPublicQuan">
                    <div class="hd clearfix" data-forward="/pubquan/{item.quan_id}">
                        <p class="img">
                            <img sn-src="{sl.resource(item.quan_pic)}" />
                        </p>
                        <p class="name">{item.quan_name}</p>
                        <p class="date">{util.formatDate(item.pub_quan_msg.date,"MM-dd")}</p>
                    </div>
                    <div class="bd" data-forward="/pubquan/article/{item.pub_quan_msg.msg_id}">
                        <div class="pt_m pl_m fs_m" sn-html="{item.pub_quan_msg.title}"></div>
                        <ul class="imgs clearfix">
                            <li class="img fl_l ml_m" sn-repeat="img in item.pub_quan_msg.imgs"><img sn-src="{sl.resource(img)}" /></li>
                        </ul>
                    </div>
                    <div class="ft flex lh_s" data-forward="/pubquan/article/{item.pub_quan_msg.msg_id}">
                        <p class="icon-see flexitem pl_m"><span class="ml_s va_m fs_s">{util.cnNum(item.pub_quan_msg.see)}</span></p>
                        <p class="icon-good pr_m" sn-tap="this.likePubQuanMsg(item.pub_quan_msg.msg_id)"><span class="ml_s va_m fs_s">{util.cnNum(item.pub_quan_msg.likes)}</span></p>
                        <p class="icon-comment pr_m"><span class="ml_s va_m fs_s">{util.cnNum(item.pub_quan_msg.comments)}</span></p>
                    </div>
                </div>
            </div>

            <div class="bd_t mb_l bg_fff">
                <div class="bd_b lh_s ml_l">我关注的</div>
                <div class="hm_pubquan__myfollow bd_b" sn-repeat="item in myfollowPublicQuan">
                    <div class="hd clearfix" data-forward="/pubquan/{item.quan_id}">
                        <p class="img">
                            <img sn-src="{sl.resource(item.quan_pic)}" />
                        </p>
                        <p class="name">{item.quan_name}</p>
                        <p class="date">{util.formatDate(item.pub_quan_msg.add_date,"MM-dd")}</p>
                    </div>
                    <div class="bd" data-forward="/pubquan/article/{item.pub_quan_msg.msg_id}">
                        <div class="pb_s pl_m pt_m fs_m to_e">{item.pub_quan_msg.title}</div>
                        <ul class="imgs clearfix">
                            <li class="img fl_l pl_m" sn-repeat="img in item.pub_quan_msg.imgs"><img sn-src="{sl.resource(img)}" /></li>
                        </ul>
                    </div>
                    <div class="ft flex lh_s" data-forward="/pubquan/article/{item.pub_quan_msg.msg_id}">
                        <p class="icon-see flexitem ml_m"><span class="ml_s va_m fs_s">{util.cnNum(item.pub_quan_msg.see)}</span></p>
                        <p class="icon-good mr_m"><span class="ml_s va_m fs_s">{util.cnNum(item.pub_quan_msg.likes)}</span></p>
                        <p class="icon-comment mr_m"><span class="ml_s va_m fs_s">{util.cnNum(item.pub_quan_msg.comments)}</span></p>
                    </div>
                </div>
            </div>

        </div>

        <div class="hm_quan">
            <div class="hm_quan__item bd_b" sn-repeat="quan in quanData">
                <div class="flex_t pt_m pb_m">
                    <p class="avatars ml_m mr_m" data-forward="/contact/friend/{quan.user_id}"><img src="{quan.avatars}" /></p>
                    <div class="bd flexitem lh_xxs">
                        <p class="name cl_dark fs_m" data-forward="/contact/friend/{quan.user_id}">{quan.user_name}</p>
                        <p class="con fs_m" sn-html="{quan.content}"></p>
                        <ul class="imgs clearfix mt_s">
                            <li class="img fl_l mr_m" sn-repeat="img in quan.imgs"><img sn-src="{sl.resource(img)}" /></li>
                        </ul>
                        <div class="bar flex fs_s mt_s">
                            <p class="date flexitem">{util.formatDate(quan.add_date,"short")}</p>
                            <p class="icon-closeye pr_m" sn-if="quan.user_id!=user.user_id" sn-tap="this.blackQuanMsg(quan.msg_id)"><span class="va_m ml_s">屏蔽</span></p>
                            <p class="icon-heart pr_m" sn-tap="this.likeQuanMsg(quan.msg_id)"><span class="va_m ml_s">赞</span></p>
                            <p class="icon-comment2 pr_m" sn-tap="this.commentQuanMsg(quan.msg_id)"><span class="va_m ml_s">评论</span></p>
                        </div>
                        <ul class="comment fs_s" sn-if="quan.quan_likes.length || quan.quan_comments.length">
                            <li sn-if="quan.quan_likes.length" class="quan-like"><span class="va_m mr_m cl_dark" sn-repeat="item in quan.quan_likes">{item.user_name}</span></li>
                            <li sn-repeat="item in quan.quan_comments"><a sn-tap="this.commentQuanMsg(quan.msg_id,item.user_id,item.user_name)" href="javascript:;"><i class="cl_dark">{item.user_name}</i>：<span>{item.content}</span></a></li>
                        </ul>
                    </div>
                </div>

            </div>

        </div>

        <div class="hm_contacts">
            <ul class="bd_tb pt_1">
                <li class="flex pl_m h_bar bg_fff bd_b" data-forward="/contact/new">
                    <p class="icon-newfriend"></p>
                    <p class="ml_l">新的朋友</p>
                </li>
                <li class="flex pl_m h_bar bg_fff bd_b" data-forward="/contact/contactlist">
                    <p class="icon-person2"></p>
                    <p class="ml_l flexitem">手机联系人</p>
                    <p class="hm_contacts__backup">备份</p>
                </li>
                <li class="flex pl_m h_bar bg_fff" data-forward="/contact/friends">
                    <p class="icon-person3"></p>
                    <p class="ml_l">我的好友</p>
                </li>
            </ul>
            <ul class="bd_t mt_l pt_1 hm_contacts__messages">
                <li class="flex h_bar bd_b bg_fff fs_m" sn-repeat="item in messagesList.list" data-forward="/contact/chat/{item.user_id}">
                    <p class="img ml_m"><img sn-src="{sl.resource(item.avatars)}" /></p>
                    <p class="flexitem h_bar ml_l pt_s"><span class="name dp_b">{item.user_name}</span>
                        <span class="cl_light fs_s msg dp_b lh_1">{item.msg}</span>
                    </p>
                    <p class="date h_bar mr_m pt_s fs_s">{util.formatDate(item.date,"short")}</p>
                </li>
            </ul>
        </div>
    </div>
    <button class="quan-publish" sn-if="quanTab.index==0" data-forward="/pubquan/publish"></button>

    <footer class="footer bd_t">
        <ul>
            <li class="icon-life">
                <span>生活</span>
            </li>
            <li class="icon-ent">
                <span>娱乐</span>
            </li>
            <li class="icon-quan_curr curr">
                <span>圈子</span>
            </li>
        </ul>
    </footer>
</div>
<div class="hm_quan__menu_mask" style="display:none" ref="quanMenuMask" sn-tap="this.hideQuanMenu()">
</div>
<div class="hm_quan__menu" ref="quanMenu" style="display:none">
    <ul>
        <li class="pl_m icon-quansend" sn-tap="this.hideQuanMenu('/quan/publish')">
            <span class="va_m ml_s">发朋友圈</span>
        </li>
        <li class="pl_m icon-gallery" sn-tap="this.hideQuanMenu('/quan/history')">
            <span class="va_m ml_s">我的历史</span>
        </li>
    </ul>
</div>